!function(){"use strict";var r=function(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r};var n=function(t){if(Array.isArray(t))return r(t)};var e=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)};var o=function(t,n){if(t){if("string"==typeof t)return r(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(t,n):void 0}};var a=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var s=function(t){return n(t)||e(t)||o(t)||a()};function t(t,n){t=(t=window.decodeURIComponent(t)).trim().replace(/\s/g,""),/^(:\/\/)/.test(t)?t="https".concat(t):/^(f|ht)tps?:\/\//i.test(t)||(t=js_url_vne+("undefined"==typeof ES6||1===ES6?"/v3/pc/libs/":"/v3/production/libs/")+t.replace(/^(\/)/,""));var e=document.querySelectorAll('script[src="'+t+'"]');if(0<e.length&&"function"==typeof n){if(e[0].hasAttribute("loaded"))!1===("undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent))&&n();else e[0].addEventListener("load",n)}else{if(0<e.length)return;var r=document.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("src",t),r.onload="function"==typeof n?function(){r.setAttribute("loaded","loaded"),n()}:function(){r.setAttribute("loaded","loaded")},document.getElementsByTagName("head")[0].appendChild(r)}}var i,c=(function(n){function e(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?n.exports=e=function(t){return typeof t}:n.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}n.exports=e}(i={exports:{}},i.exports),i.exports),d=function(t,n){"undefined"!=typeof logFetch&&!0===logFetch&&("object"===c(n)&&(n=JSON.stringify(n)),new Image(1,1).src="https://logperf.vnexpress.net/perf?lt=0&dclt=0&sr=0&url=vne_fetch&ua="+encodeURIComponent(navigator.userAgent)+"&url="+t+"&detail="+encodeURIComponent(n))};function f(t,n){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return l(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return l(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==e.return||e.return()}finally{if(c)throw a}}}}function l(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}t("".concat(js_url_vne,"/jspdf.umd.min.js"),function(){t("".concat(js_url_vne,"/html2canvas.min.js"),function(){})});var u=$('[data-component-type="vm_training_plan"]');if(0<u.length){var p=new Array,h=new Array;u.each(function(t,n){0<u[t].dataset.componentValue&&(p.push(u[t].dataset.componentValue),h.push(n))}),0<p.length&&function e(n,r,o){if(void 0===window.apiWorkerCached||void 0===window.apiWorkerCached[n.api_url]){var a=function(t,n){void 0===window.retryFetch[t.id]&&(window.retryFetch[t.id]=0),++window.retryFetch[t.id],1==window.retryFetch[t.id]?e(t,r,n):n()};if(void 0===window.retryFetch&&(window.retryFetch=new Object),void 0===n.extends&&(n.extends={method:"GET"}),"function"==typeof fetch)fetch(n.api_url,n.extends).then(function(t){t.ok?r(t.json()):(d(n.api_url,t),a(n,o))}).catch(function(t){d(n.api_url,t),a(n,o)});else{var t=new XMLHttpRequest;t.open(n.extends.method,n.api_url),t.onload=function(){200<=this.status&&this.status<300?r(JSON.parse(t.response)):(d(n.api_url,t),a(n,o))},t.onerror=function(t){d(n.api_url,t),a(n,o)},t.send()}}else r(window.apiWorkerCached[n.api_url])}({id:"rof_slides",api_url:"https://usi-saas.vnexpress.net/api/general-data?type=VMTraining&ids=".concat(p.join(","))},function(t){t.then(function(t){var n=t.status,e=(t.code,t.message,t.metadata);if(200!=n)return!1;function l(t,n){var e="",r=[];for(var o in t)switch(o){case"week":case"mileage":e+="<td>".concat(t[o],"</td>");break;default:var a,i=t[o],c="",d="",l=f(n);try{for(l.s();!(a=l.n()).done;){var s=a.value;s.data_id==i.type&&(c=s,d=i.km)}}catch(t){l.e(t)}finally{l.f()}var u=c.type;1!=c.type&&"Input"!=u&&function(){var n={name:c.type,desc:c.content,color:c.color};r.some(function(t){return t.name==n.name})||r.push(n)}(),"Input"==c.type&&1==i.type&&(u=void 0===i.new_type?"":i.new_type),e+=""==d?'<td class="rs" style="background:'.concat(c.color,'">').concat(u,"</td>"):'<td class="pace_2" style="background:'.concat(c.color,'">').concat(u," ").concat(d,"km</td>")}return{html:e,note_arr:r}}function r(t){var n,e=c[t],r=h[t],o=function(t,n,e){var r="",o=[];if(t.data_id==p[n]){var a,i=f(t.detail_week);try{for(i.s();!(a=i.n()).done;){var c=a.value,d=l(c,e);r+="\n                                <tr>\n                                    ".concat(d.html,"\n                                </tr>\n                            "),o.push(d.note_arr)}}catch(t){i.e(t)}finally{i.f()}}return{html:r,note_arr:o}}(e,t,d),a=(n=[]).concat.apply(n,s(o.note_arr)).filter(function(n,t,e){return t===e.findIndex(function(t){return t.name===n.name})});i='\n                        <div id="giaoan'.concat(t,'" class="widget-giaoan" style="background-color: #ffffff;">\n                            <p><strong id="title-giaoan').concat(t,'">').concat(c[t].name,'</strong></p>\n                            <div class="pace-table-vm">\n                                <div class="box_tableinsert">\n                                    <table align="center" border="0" cellpadding="0" id="m-giaoan').concat(t,'" cellspacing="0" class="tbl_insert" style="width:100%;">\n                                        <tbody>\n                                            <tr>\n                                                <th>Tuần</th>\n                                                <th>Thứ 2</th>\n                                                <th>Thứ 3</th>\n                                                <th>Thứ 4</th>\n                                                <th>Thứ 5</th>\n                                                <th>Thứ 6</th>\n                                                <th>Thứ 7</th>\n                                                <th>CN</th>\n                                                <th>Mileage</th>\n                                            </tr>\n                                            \n                                            ').concat(o.html,'\n            \n                                        </tbody>\n                                    </table>\n                                </div>\n                                <div class="grid grid__3" id="note').concat(t,'">\n                                    ').concat(function(t){var n,e="",r="",o=f(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;e+='<span class="rs" id="'.concat(a.color.replace("#",""),'"><strong>').concat(a.name,":</strong> ").concat(a.desc,"</span>"),r+=".pace-table-vm .grid ".concat(a.color,"::before{background:").concat(a.color,"}")}}catch(t){o.e(t)}finally{o.f()}return e+="<style>".concat(r,"</style>")}(a),'\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="mb16">\n                            <a href="javascript:;" data-id="').concat(t,'" class="btn-vm download" id="download').concat(t,'">Download giáo án</a>\n                        </div>\n                    '),$(r).replaceWith(i),setTimeout(function(){document.querySelector("#download".concat(t)).addEventListener("click",function(n){if("undefined"!=typeof myvne_users&&0!==Object.keys(myvne_users.profile).length){var e=n.target.dataset.id,t=document.getElementById("giaoan".concat(e)),a=document.getElementById("title-giaoan".concat(e)).innerText;1==device_env&&(t=document.getElementById("m-giaoan".concat(e))),n.target.innerHTML="Đang tải file...";var i=new jspdf.jsPDF("p","mm","a4");html2canvas(t,{backgroundColor:"#fff",scrollX:0,scrollY:0,windowWidth:document.documentElement.scrollWidth,windowHeight:document.documentElement.scrollHeight,scale:2}).then(function(t){var r=t.toDataURL("image/png"),o=210*t.height/t.width;1==device_env?html2canvas(document.getElementById("note".concat(e))).then(function(t){var n=t.toDataURL("image/png"),e=175*t.height/t.width;i.addImage(r,"PNG",0,parseInt(10),210,o),i.addImage(n,"PNG",5,parseInt(o)+parseInt(10)+5,175,e),i.save("".concat(a,".pdf"))}):(i.addImage(r,"PNG",0,10,210,o),i.save("".concat(a,".pdf"))),n.target.innerHTML="Download giáo án"})}else myvne_users._html_popup_login()})},300)}var i="",o=e.data,c=o.trainingPlan,d=o.trainingType;for(var a in c)r(a)})},function(){})}}();
